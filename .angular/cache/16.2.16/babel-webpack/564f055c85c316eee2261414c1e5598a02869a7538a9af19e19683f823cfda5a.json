{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { trigger, transition, style, animate, query, stagger } from '@angular/animations';\nexport let MetalListComponent = class MetalListComponent {\n  constructor(metalService, http, toast) {\n    this.metalService = metalService;\n    this.http = http;\n    this.toast = toast;\n    this.metals = [];\n    this.showFormFlag = false;\n    this.page = 1;\n    this.itemsPerPage = 5;\n    this.sortField = 'name';\n    this.sortDirection = 'asc';\n    this.filterText = '';\n  }\n  ngOnInit() {\n    this.loadMetals();\n  }\n  loadMetals() {\n    this.metalService.getFilteredMetals(this.fromDate, this.toDate).subscribe({\n      next: metals => {\n        this.metals = metals;\n        this.sortMetals();\n      },\n      error: err => console.error('Failed to load metals:', err)\n    });\n  }\n  applyFilters() {\n    this.loadMetals();\n  }\n  showForm() {\n    this.selectedMetal = {\n      name: '',\n      symbol: ''\n    };\n    this.showFormFlag = true;\n  }\n  hideForm() {\n    this.showFormFlag = false;\n    this.selectedMetal = undefined;\n  }\n  editMetal(metal) {\n    this.selectedMetal = {\n      ...metal\n    };\n    this.showFormFlag = true;\n  }\n  deleteMetal(id) {\n    this.metalService.deleteMetal(id).subscribe(() => {\n      this.metals = this.metals.filter(m => m.id !== id);\n    });\n  }\n  handleFormSubmit(metal) {\n    const request = metal.id ? this.metalService.updateMetal(metal.id, metal) : this.metalService.createMetal(metal);\n    request.subscribe(result => {\n      if (metal.id) {\n        const index = this.metals.findIndex(m => m.id === result.id);\n        if (index !== -1) this.metals[index] = result;\n      } else {\n        this.metals.push(result);\n      }\n      this.sortMetals();\n      this.hideForm();\n    });\n  }\n  undo(id) {\n    if (!id) return;\n    this.http.post(`/api/metals/${id}/undo`, {}).subscribe({\n      next: () => {\n        this.loadMetals();\n        this.toast.show('Undo successful', 'Close');\n      },\n      error: err => {\n        this.toast.show('Undo failed: ' + err.message, 'Close');\n      }\n    });\n  }\n  toggleSort(field) {\n    if (this.sortField === field) {\n      this.sortDirection = this.sortDirection === 'asc' ? 'desc' : 'asc';\n    } else {\n      this.sortField = field;\n      this.sortDirection = 'asc';\n    }\n    this.sortMetals();\n  }\n  sortMetals() {\n    this.metals.sort((a, b) => {\n      const valA = a[this.sortField];\n      const valB = b[this.sortField];\n      const strA = typeof valA === 'string' ? valA.toLowerCase() : String(valA);\n      const strB = typeof valB === 'string' ? valB.toLowerCase() : String(valB);\n      return this.sortDirection === 'asc' ? strA.localeCompare(strB) : strB.localeCompare(strA);\n    });\n  }\n  get filteredMetals() {\n    return this.metals.filter(metal => {\n      const name = metal.name.toLowerCase();\n      const symbol = metal.symbol.toLowerCase();\n      const query = this.filterText.toLowerCase();\n      return name.includes(query) || symbol.includes(query);\n    });\n  }\n  onPageChange(pageNum) {\n    this.page = pageNum;\n  }\n};\nMetalListComponent = __decorate([Component({\n  selector: 'app-metal-list',\n  templateUrl: './metal-list.component.html',\n  styleUrls: ['./metal-list.component.css'],\n  animations: [trigger('listStagger', [transition('* <=> *', [query(':enter', [style({\n    opacity: 0,\n    transform: 'translateY(-8px)'\n  }), stagger('60ms', [animate('300ms ease-out', style({\n    opacity: 1,\n    transform: 'translateY(0)'\n  }))])], {\n    optional: true\n  })])]), trigger('fadeInOut', [transition(':enter', [style({\n    opacity: 0\n  }), animate('300ms ease-out', style({\n    opacity: 1\n  }))]), transition(':leave', [animate('200ms ease-in', style({\n    opacity: 0\n  }))])])]\n})], MetalListComponent);","map":{"version":3,"names":["Component","trigger","transition","style","animate","query","stagger","MetalListComponent","constructor","metalService","http","toast","metals","showFormFlag","page","itemsPerPage","sortField","sortDirection","filterText","ngOnInit","loadMetals","getFilteredMetals","fromDate","toDate","subscribe","next","sortMetals","error","err","console","applyFilters","showForm","selectedMetal","name","symbol","hideForm","undefined","editMetal","metal","deleteMetal","id","filter","m","handleFormSubmit","request","updateMetal","createMetal","result","index","findIndex","push","undo","post","show","message","toggleSort","field","sort","a","b","valA","valB","strA","toLowerCase","String","strB","localeCompare","filteredMetals","includes","onPageChange","pageNum","__decorate","selector","templateUrl","styleUrls","animations","opacity","transform","optional"],"sources":["D:\\javacode\\angular-crud-ui\\src\\app\\metal\\metal-list\\metal-list.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { MetalService, Metal } from '../../metal/metal.service';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { ToastService } from '../../shared/toast/toast.service'; // âœ… update if path differs\r\n\r\nimport {\r\n  trigger,\r\n  transition,\r\n  style,\r\n  animate,\r\n  query,\r\n  stagger\r\n} from '@angular/animations';\r\n\r\n@Component({\r\n  selector: 'app-metal-list',\r\n  templateUrl: './metal-list.component.html',\r\n  styleUrls: ['./metal-list.component.css'],\r\n  animations: [\r\n    trigger('listStagger', [\r\n      transition('* <=> *', [\r\n        query(':enter', [\r\n          style({ opacity: 0, transform: 'translateY(-8px)' }),\r\n          stagger('60ms', [\r\n            animate('300ms ease-out', style({ opacity: 1, transform: 'translateY(0)' }))\r\n          ])\r\n        ], { optional: true })\r\n      ])\r\n    ]),\r\n    trigger('fadeInOut', [\r\n      transition(':enter', [\r\n        style({ opacity: 0 }),\r\n        animate('300ms ease-out', style({ opacity: 1 }))\r\n      ]),\r\n      transition(':leave', [\r\n        animate('200ms ease-in', style({ opacity: 0 }))\r\n      ])\r\n    ])\r\n  ]\r\n})\r\nexport class MetalListComponent implements OnInit {\r\n  metals: Metal[] = [];\r\n  selectedMetal?: Metal;\r\n\r\n  showFormFlag = false;\r\n\r\n  page = 1;\r\n  itemsPerPage = 5;\r\n\r\n  sortField: keyof Metal = 'name';\r\n  sortDirection: 'asc' | 'desc' = 'asc';\r\n\r\n  filterText = '';\r\n  fromDate?: string;\r\n  toDate?: string;\r\n\r\n  constructor(\r\n    private metalService: MetalService,\r\n    private http: HttpClient,\r\n    private toast: ToastService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.loadMetals();\r\n  }\r\n\r\n  loadMetals(): void {\r\n    this.metalService.getFilteredMetals(this.fromDate, this.toDate).subscribe({\r\n      next: (metals: Metal[]) => {\r\n        this.metals = metals;\r\n        this.sortMetals();\r\n      },\r\n      error: err => console.error('Failed to load metals:', err)\r\n    });\r\n  }\r\n\r\n  applyFilters(): void {\r\n    this.loadMetals();\r\n  }\r\n\r\n  showForm(): void {\r\n    this.selectedMetal = {\r\n      name: '',\r\n      symbol: ''\r\n    };\r\n    this.showFormFlag = true;\r\n  }\r\n\r\n  hideForm(): void {\r\n    this.showFormFlag = false;\r\n    this.selectedMetal = undefined;\r\n  }\r\n\r\n  editMetal(metal: Metal): void {\r\n    this.selectedMetal = { ...metal };\r\n    this.showFormFlag = true;\r\n  }\r\n\r\n  deleteMetal(id: string): void {\r\n    this.metalService.deleteMetal(id).subscribe(() => {\r\n      this.metals = this.metals.filter(m => m.id !== id);\r\n    });\r\n  }\r\n\r\n  handleFormSubmit(metal: Metal): void {\r\n    const request = metal.id\r\n      ? this.metalService.updateMetal(metal.id, metal)\r\n      : this.metalService.createMetal(metal);\r\n\r\n    request.subscribe(result => {\r\n      if (metal.id) {\r\n        const index = this.metals.findIndex(m => m.id === result.id);\r\n        if (index !== -1) this.metals[index] = result;\r\n      } else {\r\n        this.metals.push(result);\r\n      }\r\n      this.sortMetals();\r\n      this.hideForm();\r\n    });\r\n  }\r\n\r\n  undo(id?: string): void {\r\n    if (!id) return;\r\n\r\n    this.http.post(`/api/metals/${id}/undo`, {}).subscribe({\r\n      next: () => {\r\n        this.loadMetals();\r\n        this.toast.show('Undo successful', 'Close');\r\n      },\r\n      error: err => {\r\n        this.toast.show('Undo failed: ' + err.message, 'Close');\r\n      }\r\n    });\r\n  }\r\n\r\n  toggleSort(field: keyof Metal): void {\r\n    if (this.sortField === field) {\r\n      this.sortDirection = this.sortDirection === 'asc' ? 'desc' : 'asc';\r\n    } else {\r\n      this.sortField = field;\r\n      this.sortDirection = 'asc';\r\n    }\r\n    this.sortMetals();\r\n  }\r\n\r\n  sortMetals(): void {\r\n    this.metals.sort((a, b) => {\r\n      const valA = a[this.sortField];\r\n      const valB = b[this.sortField];\r\n      const strA = typeof valA === 'string' ? valA.toLowerCase() : String(valA);\r\n      const strB = typeof valB === 'string' ? valB.toLowerCase() : String(valB);\r\n      return this.sortDirection === 'asc'\r\n        ? strA.localeCompare(strB)\r\n        : strB.localeCompare(strA);\r\n    });\r\n  }\r\n\r\n  get filteredMetals(): Metal[] {\r\n    return this.metals.filter(metal => {\r\n      const name = metal.name.toLowerCase();\r\n      const symbol = metal.symbol.toLowerCase();\r\n      const query = this.filterText.toLowerCase();\r\n      return name.includes(query) || symbol.includes(query);\r\n    });\r\n  }\r\n\r\n  onPageChange(pageNum: number): void {\r\n    this.page = pageNum;\r\n  }\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}