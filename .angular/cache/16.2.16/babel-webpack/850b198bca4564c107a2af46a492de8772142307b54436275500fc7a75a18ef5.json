{"ast":null,"code":"import { fadeInOut, listStagger } from '../../animations';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../user.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"ngx-pagination\";\nimport * as i5 from \"../user-form/user-form.component\";\nfunction UserListComponent_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵelement(1, \"div\", 16);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UserListComponent_div_20_span_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"\\u25B2\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UserListComponent_div_20_span_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"\\u25BC\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UserListComponent_div_20_span_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"\\u25B2\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UserListComponent_div_20_span_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"\\u25BC\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UserListComponent_div_20_tr_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\", 28)(1, \"td\", 29)(2, \"div\", 30);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"td\", 29)(5, \"span\", 31);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"td\", 32)(8, \"div\", 33)(9, \"button\", 34);\n    i0.ɵɵlistener(\"click\", function UserListComponent_div_20_tr_16_Template_button_click_9_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const user_r8 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r9.editUser(user_r8));\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(10, \"svg\", 35);\n    i0.ɵɵelement(11, \"path\", 36);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(12, \"button\", 37);\n    i0.ɵɵlistener(\"click\", function UserListComponent_div_20_tr_16_Template_button_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const user_r8 = restoredCtx.$implicit;\n      const ctx_r11 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r11.deleteUser(user_r8.id));\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(13, \"svg\", 35);\n    i0.ɵɵelement(14, \"path\", 38);\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const user_r8 = ctx.$implicit;\n    i0.ɵɵproperty(\"@listStagger\", undefined);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(user_r8.name);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", user_r8.email, \" \");\n  }\n}\nfunction UserListComponent_div_20_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 39)(1, \"app-user-form\", 40);\n    i0.ɵɵlistener(\"formSubmit\", function UserListComponent_div_20_div_19_Template_app_user_form_formSubmit_1_listener($event) {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r12.handleFormSubmit($event));\n    })(\"cancel\", function UserListComponent_div_20_div_19_Template_app_user_form_cancel_1_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r14 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r14.hideForm());\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"@fadeInOut\", undefined);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"user\", ctx_r7.selectedUser);\n  }\n}\nconst _c0 = function (a0, a1) {\n  return {\n    itemsPerPage: a0,\n    currentPage: a1\n  };\n};\nfunction UserListComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 17)(1, \"div\", 18)(2, \"table\", 19)(3, \"thead\", 20)(4, \"tr\")(5, \"th\", 21);\n    i0.ɵɵlistener(\"click\", function UserListComponent_div_20_Template_th_click_5_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.toggleSort(\"name\"));\n    });\n    i0.ɵɵtext(6, \" Name \");\n    i0.ɵɵtemplate(7, UserListComponent_div_20_span_7_Template, 2, 0, \"span\", 22);\n    i0.ɵɵtemplate(8, UserListComponent_div_20_span_8_Template, 2, 0, \"span\", 22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\", 21);\n    i0.ɵɵlistener(\"click\", function UserListComponent_div_20_Template_th_click_9_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.toggleSort(\"email\"));\n    });\n    i0.ɵɵtext(10, \" Email \");\n    i0.ɵɵtemplate(11, UserListComponent_div_20_span_11_Template, 2, 0, \"span\", 22);\n    i0.ɵɵtemplate(12, UserListComponent_div_20_span_12_Template, 2, 0, \"span\", 22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"th\", 23);\n    i0.ɵɵtext(14, \" Actions \");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(15, \"tbody\", 24);\n    i0.ɵɵtemplate(16, UserListComponent_div_20_tr_16_Template, 15, 3, \"tr\", 25);\n    i0.ɵɵpipe(17, \"paginate\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(18, \"pagination-controls\", 26);\n    i0.ɵɵlistener(\"pageChange\", function UserListComponent_div_20_Template_pagination_controls_pageChange_18_listener($event) {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r18 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r18.page = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(19, UserListComponent_div_20_div_19_Template, 2, 2, \"div\", 27);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"max-h-96\", !ctx_r1.showFormFlag)(\"max-h-[800px]\", ctx_r1.showFormFlag);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.getSortDirection(\"name\") === \"asc\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.getSortDirection(\"name\") === \"desc\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.getSortDirection(\"email\") === \"asc\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.getSortDirection(\"email\") === \"desc\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind2(17, 11, ctx_r1.filteredUsers, i0.ɵɵpureFunction2(14, _c0, ctx_r1.itemsPerPage, ctx_r1.page)));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"autoHide\", true);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.showFormFlag);\n  }\n}\nexport let UserListComponent = /*#__PURE__*/(() => {\n  class UserListComponent {\n    constructor(userService) {\n      this.userService = userService;\n      this.users = [];\n      this.selectedUser = this.createEmptyUser();\n      this.showFormFlag = false;\n      this.loading = true;\n      this.page = 1;\n      this.itemsPerPage = 5;\n      this.filterText = '';\n      // ✅ Multi-column sort stack\n      this.sortStack = [];\n    }\n    ngOnInit() {\n      this.loadUsers();\n    }\n    createEmptyUser() {\n      return {\n        name: '',\n        email: ''\n      };\n    }\n    loadUsers() {\n      this.loading = true;\n      this.userService.getAllUsers().subscribe({\n        next: data => {\n          this.users = data;\n          this.sortUsers();\n          this.loading = false;\n        },\n        error: () => this.loading = false\n      });\n    }\n    toggleSort(field) {\n      const existing = this.sortStack.find(s => s.field === field);\n      if (existing) {\n        existing.direction = existing.direction === 'asc' ? 'desc' : 'asc';\n      } else {\n        this.sortStack.push({\n          field,\n          direction: 'asc'\n        });\n      }\n      this.sortUsers();\n    }\n    getSortIcon(field) {\n      const sort = this.sortStack.find(s => s.field === field);\n      return sort ? sort.direction === 'asc' ? '↑' : '↓' : '';\n    }\n    getSortDirection(field) {\n      return this.sortStack.find(s => s.field === field)?.direction;\n    }\n    sortUsers() {\n      const stack = [...this.sortStack];\n      this.users.sort((a, b) => {\n        for (const s of stack) {\n          const valA = (a[s.field] ?? '').toString().toLowerCase();\n          const valB = (b[s.field] ?? '').toString().toLowerCase();\n          const cmp = valA.localeCompare(valB);\n          if (cmp !== 0) return s.direction === 'asc' ? cmp : -cmp;\n        }\n        return 0;\n      });\n    }\n    applyFilters() {\n      // Empty hook — filtering is driven by `filteredUsers` getter\n    }\n    get filteredUsers() {\n      return this.users.filter(u => (u.name ?? '').toLowerCase().includes(this.filterText.toLowerCase()) || (u.email ?? '').toLowerCase().includes(this.filterText.toLowerCase())).filter(u => {\n        const createdAt = u.createdAt ? new Date(u.createdAt).getTime() : 0;\n        const from = this.fromDate ? new Date(this.fromDate).getTime() : -Infinity;\n        const to = this.toDate ? new Date(this.toDate).getTime() : Infinity;\n        const matchesDate = createdAt >= from && createdAt <= to;\n        return matchesDate;\n      });\n    }\n    showForm() {\n      this.selectedUser = this.createEmptyUser();\n      this.showFormFlag = true;\n      window.scrollTo({\n        top: document.body.scrollHeight,\n        behavior: 'smooth'\n      });\n    }\n    editUser(user) {\n      this.selectedUser = {\n        ...user\n      };\n      this.showFormFlag = true;\n      window.scrollTo({\n        top: document.body.scrollHeight,\n        behavior: 'smooth'\n      });\n    }\n    deleteUser(id) {\n      if (!id) return;\n      this.userService.deleteUser(id).subscribe({\n        next: () => {\n          this.users = this.users.filter(u => u.id !== id);\n        },\n        error: () => alert('Failed to delete user')\n      });\n    }\n    handleFormSubmit(user) {\n      if (user.id) {\n        this.userService.updateUser(user.id, user).subscribe({\n          next: updated => {\n            const index = this.users.findIndex(u => u.id === updated.id);\n            if (index > -1) this.users[index] = updated;\n            this.sortUsers();\n            this.hideForm();\n          },\n          error: () => alert('Failed to update user')\n        });\n      } else {\n        this.userService.createUser(user).subscribe({\n          next: newUser => {\n            this.users = [...this.users, newUser];\n            this.sortUsers();\n            this.hideForm();\n          },\n          error: () => alert('Failed to create user')\n        });\n      }\n    }\n    hideForm() {\n      this.showFormFlag = false;\n      this.selectedUser = this.createEmptyUser();\n    }\n    static {\n      this.ɵfac = function UserListComponent_Factory(t) {\n        return new (t || UserListComponent)(i0.ɵɵdirectiveInject(i1.UserService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: UserListComponent,\n        selectors: [[\"app-user-list\"]],\n        decls: 23,\n        vars: 5,\n        consts: [[1, \"max-w-6xl\", \"mx-auto\", \"py-8\", \"px-4\"], [1, \"flex\", \"justify-between\", \"items-center\", \"mb-10\"], [1, \"text-3xl\", \"font-bold\", \"bg-clip-text\", \"text-transparent\", \"bg-gradient-to-r\", \"from-primary-600\", \"to-blue-800\"], [1, \"btn-primary\", \"will-change-transform\", \"preserve-3d\", 3, \"click\"], [1, \"flex\", \"items-center\"], [\"fill\", \"none\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 1, \"w-5\", \"h-5\", \"mr-2\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M12 6v6m0 0v6m0-6h6m-6 0H6\"], [1, \"mb-6\", \"grid\", \"grid-cols-2\", \"sm:grid-cols-4\", \"gap-4\"], [1, \"block\", \"text-xs\", \"font-medium\", \"text-gray-600\"], [\"type\", \"date\", 1, \"w-full\", \"px-3\", \"py-2\", \"border\", \"rounded\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"type\", \"text\", \"placeholder\", \"Search users by name or email...\", 1, \"w-full\", \"mb-6\", \"px-4\", \"py-2\", \"border\", \"rounded\", \"text-sm\", 3, \"ngModel\", \"ngModelChange\"], [\"class\", \"flex justify-center my-8\", 4, \"ngIf\"], [\"class\", \"floating-card glass-panel overflow-hidden smooth-transition\", 3, \"max-h-96\", \"max-h-[800px]\", 4, \"ngIf\"], [1, \"fixed\", \"top-20\", \"-right-10\", \"w-72\", \"h-72\", \"rounded-full\", \"bg-primary-300/10\", \"blur-3xl\", \"-z-10\"], [1, \"fixed\", \"bottom-10\", \"left-10\", \"w-64\", \"h-64\", \"rounded-full\", \"bg-indigo-300/10\", \"blur-3xl\", \"-z-10\"], [1, \"flex\", \"justify-center\", \"my-8\"], [1, \"animate-spin\", \"rounded-full\", \"h-12\", \"w-12\", \"border-t-2\", \"border-b-2\", \"border-primary-500\"], [1, \"floating-card\", \"glass-panel\", \"overflow-hidden\", \"smooth-transition\"], [1, \"overflow-x-auto\"], [1, \"min-w-full\", \"divide-y\", \"divide-gray-200/50\"], [1, \"bg-surface-elevated\"], [1, \"px-6\", \"py-4\", \"text-left\", \"text-xs\", \"font-medium\", \"text-slate-500\", \"uppercase\", \"tracking-wider\", \"cursor-pointer\", 3, \"click\"], [4, \"ngIf\"], [1, \"px-6\", \"py-4\", \"text-right\", \"text-xs\", \"font-medium\", \"text-slate-500\", \"uppercase\", \"tracking-wider\"], [1, \"divide-y\", \"divide-gray-200/30\", \"bg-surface-card\"], [\"class\", \"hover:bg-slate-50/50 transition-colors duration-150\", 4, \"ngFor\", \"ngForOf\"], [1, \"mt-4\", 3, \"autoHide\", \"pageChange\"], [\"class\", \"border-t border-slate-200/50 px-6 py-6 bg-surface-elevated\", 4, \"ngIf\"], [1, \"hover:bg-slate-50/50\", \"transition-colors\", \"duration-150\"], [1, \"px-6\", \"py-4\", \"whitespace-nowrap\"], [1, \"text-sm\", \"font-medium\", \"text-slate-900\"], [1, \"px-2.5\", \"py-1\", \"rounded-full\", \"text-xs\", \"font-medium\", \"bg-primary-100\", \"text-primary-800\"], [1, \"px-6\", \"py-4\", \"whitespace-nowrap\", \"text-right\", \"text-sm\"], [1, \"flex\", \"justify-end\", \"space-x-2\"], [1, \"text-primary-600\", \"hover:text-primary-800\", \"transition-colors\", 3, \"click\"], [\"fill\", \"none\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 1, \"w-5\", \"h-5\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 \\n                             0 002-2v-5m-1.414-9.414a2 2 0 \\n                             112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"], [1, \"text-rose-600\", \"hover:text-rose-800\", \"transition-colors\", 3, \"click\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M19 7l-.867 12.142A2 2 0 \\n                             0116.138 21H7.862a2 2 0 \\n                             01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 \\n                             00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"], [1, \"border-t\", \"border-slate-200/50\", \"px-6\", \"py-6\", \"bg-surface-elevated\"], [3, \"user\", \"formSubmit\", \"cancel\"]],\n        template: function UserListComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h1\", 2);\n            i0.ɵɵtext(3, \" User Management \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"button\", 3);\n            i0.ɵɵlistener(\"click\", function UserListComponent_Template_button_click_4_listener() {\n              return ctx.showForm();\n            });\n            i0.ɵɵelementStart(5, \"span\", 4);\n            i0.ɵɵnamespaceSVG();\n            i0.ɵɵelementStart(6, \"svg\", 5);\n            i0.ɵɵelement(7, \"path\", 6);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(8, \" Add New User \");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵnamespaceHTML();\n            i0.ɵɵelementStart(9, \"div\", 7)(10, \"div\")(11, \"label\", 8);\n            i0.ɵɵtext(12, \"From Date\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(13, \"input\", 9);\n            i0.ɵɵlistener(\"ngModelChange\", function UserListComponent_Template_input_ngModelChange_13_listener($event) {\n              return ctx.fromDate = $event;\n            })(\"change\", function UserListComponent_Template_input_change_13_listener() {\n              return ctx.applyFilters();\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(14, \"div\")(15, \"label\", 8);\n            i0.ɵɵtext(16, \"To Date\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(17, \"input\", 9);\n            i0.ɵɵlistener(\"ngModelChange\", function UserListComponent_Template_input_ngModelChange_17_listener($event) {\n              return ctx.toDate = $event;\n            })(\"change\", function UserListComponent_Template_input_change_17_listener() {\n              return ctx.applyFilters();\n            });\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(18, \"input\", 10);\n            i0.ɵɵlistener(\"ngModelChange\", function UserListComponent_Template_input_ngModelChange_18_listener($event) {\n              return ctx.filterText = $event;\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(19, UserListComponent_div_19_Template, 2, 0, \"div\", 11);\n            i0.ɵɵtemplate(20, UserListComponent_div_20_Template, 20, 17, \"div\", 12);\n            i0.ɵɵelement(21, \"div\", 13)(22, \"div\", 14);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(13);\n            i0.ɵɵproperty(\"ngModel\", ctx.fromDate);\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngModel\", ctx.toDate);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngModel\", ctx.filterText);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.loading);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", !ctx.loading);\n          }\n        },\n        dependencies: [i2.NgForOf, i2.NgIf, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel, i4.PaginationControlsComponent, i5.UserFormComponent, i4.PaginatePipe],\n        styles: [\"table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:8px;border-bottom:1px solid #ccc}button[_ngcontent-%COMP%]{padding:6px 12px;color:#fff;background-color:#dc143c;border:none;cursor:pointer}\"],\n        data: {\n          animation: [fadeInOut, listStagger]\n        }\n      });\n    }\n  }\n  return UserListComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}